(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{HMGs:function(e,n){e.exports='\x3c!--\n    Copyright (c)  Universit\xe9 catholique Louvain.  All rights reserved\n    Authors :  J\xe9r\xf4me Lemaire, Corentin Lamy, Daubry Benjamin & Marchesini Bruno\n    Date : 2018-2019\n    This file is part of Stud.UCLouvain\n    Licensed under the GPL 3.0 license. See LICENSE file in the project root for full license information.\n\n    Stud.UCLouvain is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    Stud.UCLouvain is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with Stud.UCLouvain.  If not, see <http://www.gnu.org/licenses/>.\n--\x3e\n\x3c!--EN-TETE--\x3e\n<ion-header>\n    <ion-toolbar color="map">\n        <ion-buttons slot="start">\n            <ion-back-button></ion-back-button>\n            <img alt="Map Icon" height="28" src="./assets/img/s.png"/>\n        </ion-buttons>\n        <ion-title horizontal="center">{{title | translate}}</ion-title>\n        <ion-buttons slot="end">\n            <ion-button (click)="showSearch()" color="light">\n                <ion-icon name="search" slot="icon-only"></ion-icon>\n            </ion-button>\n        </ion-buttons>\n    </ion-toolbar>\n</ion-header>\n\n\x3c!--BODY--\x3e\n<div (leafletMapReady)="onMapReady($event)"\n     [leafletOptions]="options"\n     leaflet\n     style="height: 100%;">\n</div>'},N8Eg:function(e,n){e.exports="search-modal span {\n  width: 100%; }\n\nsearch-modal ion-segment-button {\n  color: white !important; }\n\nsearch-modal .name {\n  overflow: hidden;\n  text-overflow: ellipsis; }\n\nsearch-modal .id {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-weight: bold; }\n\nsearch-modal .miniature {\n  float: right;\n  -o-object-fit: scale-down;\n     object-fit: scale-down;\n  /* Do not scale the image */\n  -o-object-position: center;\n     object-position: center;\n  /* Center the image within the element */\n  height: 60px;\n  width: 80px; }\n\nsearch-modal .info {\n  float: left;\n  width: 140px; }\n\nsearch-modal .streetInfo {\n  float: left; }\n\nsearch-modal #search .toolbar-content {\n  min-width: 90%; }\n\nsearch-modal .segment-button {\n  border-color: lightgray;\n  opacity: 0.75; }\n\nsearch-modal .segment-button.activated,\nsearch-modal .segment-button.segment-activated {\n  border-color: white; }\n\nsearch-modal .toolbar ion-searchbar .searchbar-input {\n  background: white; }\n"},"TM/3":function(e,n){e.exports='@charset "UTF-8";\n/*\n    Copyright (c)  Universit\xe9 catholique Louvain.  All rights reserved\n    Authors : Benjamin Daubry & Bruno Marchesini and J\xe9r\xf4me Lemaire & Corentin Lamy\n    Date : 2018-2019\n    This file is part of Stud.UCLouvain\n    Licensed under the GPL 3.0 license. See LICENSE file in the project root for full license information.\n\n    Stud.UCLouvain is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    Stud.UCLouvain is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with Stud.UCLouvain.  If not, see <http://www.gnu.org/licenses/>.\n*/\n'},nGpr:function(e,n){e.exports='\x3c!--\n    Copyright (c)  Universit\xe9 catholique Louvain.  All rights reserved\n    Authors :  J\xe9r\xf4me Lemaire, Corentin Lamy, Daubry Benjamin & Marchesini Bruno\n    Date : 2018-2019\n    This file is part of Stud.UCLouvain\n    Licensed under the GPL 3.0 license. See LICENSE file in the project root for full license information.\n\n    Stud.UCLouvain is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    Stud.UCLouvain is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with Stud.UCLouvain.  If not, see <http://www.gnu.org/licenses/>.\n--\x3e\n<ion-header>\n    <ion-toolbar>\n        <ion-searchbar (ionChange)="search($event)" placeholder="search"></ion-searchbar>\n        <ion-buttons slot="end">\n            <ion-button (click)="close()" fill="clear" icon-only>\n                <ion-icon item-right name="close"></ion-icon>\n            </ion-button>\n        </ion-buttons>\n    </ion-toolbar>\n</ion-header>\n\n<ion-segment disabled value="halls">\n    <ion-segment-button checked value="halls">\n        <ion-label>Halls</ion-label>\n    </ion-segment-button>\n    <ion-segment-button value="rainy">\n        <ion-label>...</ion-label>\n    </ion-segment-button>\n</ion-segment>\n\n<ion-content>\n    <ion-list>\n        <ion-item (click)="select(item)" *ngFor="let item of displayItems">\n      <span class="ion-padding" *ngIf="item.code">\n        <div class="info">\n          <ion-label class="id">{{item.code}}</ion-label>\n          <ion-label class="name">{{item.title}}</ion-label>\n          <ion-note class="address">{{item.address}}</ion-note>\n        </div>\n        <ion-img class="miniature" [src]="item.vignette"></ion-img>\n      </span>\n        </ion-item>\n    </ion-list>\n</ion-content>'},s1Mh:function(e,n,t){"use strict";t.r(n);var o,i=t("mrSG"),r=t("Ip0R"),s=t("CcnG"),a=t("gIcY"),l=t("ZZ/e"),c=t("A7o+"),u=t("67Y/"),p=t("t/Na"),h=t("BRqq"),d=t("oHzx"),f=function(){function e(e,n){this.http=e,this.user=n,this.zones=[],this.url="",this.urlLLN="assets/data/resourcesLLN.json",this.urlMons="assets/data/resourcesMons.json",this.urlWol="assets/data/resourcesWoluwe.json",this.old="",this.old=this.user.campus,this.update()}return e.prototype.update=function(){var e=this.user.campus;"LLN"===e&&(this.url=this.urlLLN),"Woluwe"===e&&(this.url=this.urlWol),"Mons"===e&&(this.url=this.urlMons),e!==this.old&&(this.zones=[],this.old=e)},e.prototype.loadResources=function(){var e=this;return this.update(),0===this.zones.length?new Promise(function(n){e.http.get(e.url).pipe(Object(u.a)(function(e){return e})).subscribe(function(t){var o=e.getZones(t);e.zones.push(o),n(e.zones)})}):new Promise(function(n){n(e.zones)})},e.prototype.compare=function(e,n){return e.nom<n.nom?-1:e.nom>n.nom?1:0},e.prototype.createMapLocations=function(e){for(var n=[],t=0,o=e.sort(this.compare);t<o.length;t++){var i=o[t],r=new h.a(i.nom,i.adresse,i.coord.lat,i.coord.lng,i.sigle,i.vignette);n.push(r)}return n},e.prototype.getZones=function(e){this.zones=e;var n=e.zones;return{auditoires:this.createMapLocations(n.auditoires),locaux:this.createMapLocations(n.locaux),bibliotheques:this.createMapLocations(n.bibliotheques),sports:this.createMapLocations(n.sports),restaurants_universitaires:this.createMapLocations(n.restaurants_universitaires),services:this.createMapLocations(n.services),parkings:this.createMapLocations(n.parkings),icon:"arrow-dropdown"}},e=i.c([Object(s.B)(),i.f("design:paramtypes",[p.a,d.a])],e)}(),m=function(){function e(e,n){var t=this;this.modalCtrl=e,this.poiService=n,this.searchQuery="",this.items=[],this.displayItems=[],this.poiService.loadResources().then(function(e){t.items=e[0].auditoires.list,t.displayItems=t.items})}return e.prototype.close=function(){this.modalCtrl.dismiss()},e.prototype.search=function(e){var n=e.detail.value.toLowerCase();this.items=this.items.filter(function(e){return[e.title,e.code,e.address].some(function(e){return e.toLowerCase().indexOf(n)>-1})})},e.prototype.select=function(e){this.modalCtrl.dismiss({id:e.code,name:e.title,pos:{lat:e.lat,lng:e.lng},img:e.vignette,address:e.address})},e=i.c([Object(s.n)({selector:"search-modal",template:t("nGpr"),styles:[t("N8Eg")]}),i.f("design:paramtypes",[l.i,f])],e)}(),g=t("4R65"),b=function(){function e(){this.campusLocations={LLN:{lat:50.66808100000001,lng:4.611832400000026},Woluwe:{lat:50.8489094,lng:4.432088300000032},Mons:{lat:50.45424080000001,lng:3.956658999999945}}}return e.prototype.getCampusLocation=function(e){return this.campusLocations[e]},e=i.c([Object(s.B)(),i.f("design:paramtypes",[])],e)}(),v=function(){function e(e,n,t,o,i,r){this.modalCtrl=e,this.platform=n,this.poilocations=t,this.mapService=o,this.userService=i,this.menuController=r,this.title="Carte",this.options={layers:[g.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png")],zoom:14,center:this.mapService.getCampusLocation(this.userService.campus)}}return e.prototype.ionViewDidEnter=function(){var e=this;this.platform.ready().then(function(){e.poilocations.loadResources().then(function(n){e.zones=n})}),this.menuController.swipeGesture(!1)},e.prototype.onMapReady=function(e){this.map=e,this.centerMapOnPopupOpen()},e.prototype.centerMapOnPopupOpen=function(){var e=this;this.map.on("popupopen",function(n){var t=n.target._popup,o=e.map.project(t._latlng,e.map.getZoom());o.y-=t._container.clientHeight/2,e.map.panTo(e.map.unproject(o,e.map.getZoom()),{animate:!0})})},e.prototype.showSearch=function(){return i.b(this,void 0,void 0,function(){var e,n=this;return i.e(this,function(t){switch(t.label){case 0:return[4,this.modalCtrl.create({component:m,componentProps:{items:this.zones},cssClass:"search-modal"})];case 1:return(e=t.sent()).onDidDismiss().then(function(e){n.showBuilding(e.data)}),[4,e.present()];case 2:return t.sent(),[2]}})})},e.prototype.showBuilding=function(e){this.updateOrCreateBuildingMarker(e);var n=this.building.getPopup();n.isOpen&&this.map.fire("popupopen",{popup:n})},e.prototype.updateOrCreateBuildingMarker=function(e){this.building?this.building.setLatLng([e.pos.lat,e.pos.lng]).bindPopup(this.generatePopupContent(e)).openPopup():this.building=g.marker([e.pos.lat,e.pos.lng]).addTo(this.map).bindPopup(this.generatePopupContent(e)).openPopup()},e.prototype.generatePopupContent=function(e){return'<div>\n                <p class="popup-title">'+e.id+'</p>\n                <p style="width: 150px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">'+e.name+'</p>\n                <img style="width:150px; height: auto;" src="'+e.img+'" alt="">\n                <p style="width: 150px; word-wrap: break-word;">'+e.address+"</p>\n              </div>"},e=i.c([Object(s.n)({selector:"page-map",template:t("HMGs"),styles:[t("TM/3")]}),i.f("design:paramtypes",[l.i,l.l,f,b,d.a,l.h])],e)}(),y=t("a3Cf"),w=t("6blF"),L=(o=function(e,n){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)},function(e,n){function t(){this.constructor=e}o(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),C=function(e,n,t,o){var i,r=arguments.length,s=r<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,n,t,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(n,t,s):i(n,t))||s);return r>3&&s&&Object.defineProperty(n,t,s),s},S=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return L(n,e),n.prototype.getCurrentPosition=function(e){return Object(y.cordova)(this,"getCurrentPosition",{callbackOrder:"reverse"},arguments)},n.prototype.watchPosition=function(e){return new w.a(function(n){var t=navigator.geolocation.watchPosition(n.next.bind(n),n.next.bind(n),e);return function(){return navigator.geolocation.clearWatch(t)}})},n.pluginName="Geolocation",n.plugin="cordova-plugin-geolocation",n.pluginRef="navigator.geolocation",n.repo="https://github.com/apache/cordova-plugin-geolocation",n.install='ionic cordova plugin add cordova-plugin-geolocation --variable GEOLOCATION_USAGE_DESCRIPTION="To locate you"',n.installVariables=["GEOLOCATION_USAGE_DESCRIPTION"],n.platforms=["Amazon Fire OS","Android","Browser","iOS","Windows"],n=C([Object(s.B)()],n)}(y.IonicNativePlugin),P=t("ZYCi"),O=[{path:"",component:v}],N=function(){function e(){}return e=i.c([Object(s.J)({imports:[P.h.forChild(O)],exports:[P.h]})],e)}(),A=t("wPIS");t.d(n,"MapPageModule",function(){return I});var I=function(){function e(){}return e=i.c([Object(s.J)({declarations:[v,m],imports:[l.f,a.b,a.d,r.b,c.b.forChild(),N,A.a,p.b],providers:[f,S,b],entryComponents:[m]})],e)}()}}]);