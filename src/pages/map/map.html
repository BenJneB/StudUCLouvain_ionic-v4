<!--
    Copyright (c)  Université catholique Louvain.  All rights reserved
    Authors :  Jérôme Lemaire and Corentin Lamy
    Date : July 2017
    This file is part of UCLCampus
    Licensed under the GPL 3.0 license. See LICENSE file in the project root for full license information.

    UCLCampus is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    UCLCampus is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with UCLCampus.  If not, see <http://www.gnu.org/licenses/>.
-->


<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title align="center">{{title | translate}}</ion-title>
  </ion-navbar>
</ion-header>
<ion-content>
  <div *ngIf="searching" class="spinner-container">
    <ion-spinner></ion-spinner>
  </div>
  <div #pleaseConnect id="please-connect">
    <p> Connectez-vous à internet</p>
  </div>
  <div id="container">
    <div #map id="map"></div>
  </div>

  <!--<ion-item>
    <button ion-button block (tap)="presentFilter()" [hidden]="showLocationList" icon-right>
      Afficher les points d'intérêt
      <ion-icon name="arrow-dropdown"></ion-icon>
    </button>
    <button ion-button block (tap)="presentFilter()" [hidden]="!showLocationList" icon-right>
      Masquer les points d'intérêt
      <ion-icon name="arrow-dropup"></ion-icon>
    </button>
  </ion-item>
  <ion-card *ngFor="let zone of zones" [hidden]="!showLocationList" overflow-scroll=false>-->
  <ion-card *ngFor="let zone of zones" overflow-scroll=false>

    <ion-item-divider (tap)="toggleDetails(zone.auditoires)">
      Auditoires
    </ion-item-divider>

    <ion-item *ngFor="let auditoire of zone.auditoires.list, let i=index" [hidden]="!zone.auditoires.showDetails">
      <div item-content>
        <h3>{{auditoire.title}}</h3>
        <p>{{auditoire.address}}</p>
      </div>
      <ion-toggle [(ngModel)]="zone.auditoires.listChecked[i]" color="secondary" (ionChange)="toggleLocation(auditoire, zone.auditoires.listChecked, i)"></ion-toggle>
    </ion-item>

    <ion-item-divider (tap)="toggleDetails(zone.bibliotheques)" >
      Bibliothèques
    </ion-item-divider>

    <ion-item *ngFor="let bibli of zone.bibliotheques.list, let i=index" [hidden]="!zone.bibliotheques.showDetails">
      <div item-content >
        <h3>{{bibli.title}}</h3>
        <p>{{bibli.address}}</p>
      </div>
      <ion-toggle [(ngModel)]="zone.bibliotheques.listChecked[i]" color="secondary" (ionChange)="toggleLocation(bibli, zone.bibliotheques.listChecked, i)"></ion-toggle>
    </ion-item>

    <ion-item-divider (tap)="toggleDetails(zone.restaurants_universitaires)">
      Restaurants Universitaires
    </ion-item-divider>

    <ion-item *ngFor="let restau of zone.restaurants_universitaires.list, let i=index" [hidden]="!zone.restaurants_universitaires.showDetails">
      <div item-content >
        <h3>{{restau.title}}</h3>
        <p>{{restau.address}}</p>
      </div>
      <ion-toggle [(ngModel)]="zone.restaurants_universitaires.listChecked[i]" color="secondary" (ionChange)="toggleLocation(restau, zone.restaurants_universitaires.listChecked, i)"></ion-toggle>
    </ion-item>

    <ion-item-divider (tap)="toggleDetails(zone.parkings)" >
      Parkings
    </ion-item-divider>

    <ion-item *ngFor="let parking of zone.parkings.list, let i=index" [hidden]="!zone.parkings.showDetails">
      <div item-content>
        <h3>{{parking.title}}</h3>
      </div>
      <ion-toggle [(ngModel)]="zone.parkings.listChecked[i]" color="secondary"  (ionChange)="toggleLocation(parking, zone.parkings.listChecked, i)"></ion-toggle>
    </ion-item>
  </ion-card>
</ion-content>
