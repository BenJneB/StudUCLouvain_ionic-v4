<!--
    Copyright (c)  Université catholique Louvain.  All rights reserved
    Authors :  Jérôme Lemaire, Corentin Lamy, Daubry Benjamin & Marchesini Bruno
    Date : 2018-2019
    This file is part of Stud.UCLouvain
    Licensed under the GPL 3.0 license. See LICENSE file in the project root for full license information.

    Stud.UCLouvain is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Stud.UCLouvain is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Stud.UCLouvain.  If not, see <http://www.gnu.org/licenses/>.
-->
<ion-header>
  <ion-toolbar>
    <ion-searchbar (ionChange)="search($event)" placeholder="Search"></ion-searchbar>
    <ion-buttons slot="end">
      <ion-button (click)="close()" fill="clear" icon-only>
        <ion-icon item-right name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-item>
  <ion-label>Category</ion-label>
  <ion-select [interfaceOptions]="selectOptions" interface="action-sheet" [(ngModel)]="selectedCategory"
    (ionChange)="changeCategory()">
    <ion-select-option *ngFor="let category of categories" value="{{category}}">{{category|cleanAndCapitalize}}
    </ion-select-option>
  </ion-select>
</ion-item>

<ion-content>
  <ion-list>
    <ion-item (click)="select(item)" *ngFor="let item of displayItems">
      <span class="ion-padding" *ngIf="item">
        <div class="info">
          <ion-label class="id">{{item.sigle}}</ion-label>
          <ion-label class="name">{{item.nom}}</ion-label>
          <ion-note class="address">{{item.adresse}}</ion-note>
        </div>
        <ion-img *ngIf="item.vignette" [style.opacity]="0" class="miniature" [src]="item.vignette"
          (ionImgDidLoad)="onVignetteLoaded($event)"></ion-img>
      </span>
    </ion-item>
  </ion-list>
</ion-content>