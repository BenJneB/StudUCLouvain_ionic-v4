(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{NRyk:function(e,n){e.exports='\x3c!--\n\n    Copyright (c)  Universit\xe9 catholique Louvain.  All rights reserved\n    Authors :  J\xe9r\xf4me Lemaire, Corentin Lamy, Daubry Benjamin & Marchesini Bruno\n    Date : 2018-2019\n    This file is part of Stud.UCLouvain\n    Licensed under the GPL 3.0 license. See LICENSE file in the project root for full license information.\n\n    Stud.UCLouvain is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    Stud.UCLouvain is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with Stud.UCLouvain.  If not, see <http://www.gnu.org/licenses/>.\n\n--\x3e\n\x3c!--EN-TETE--\x3e\n<ion-header>\n    <ion-toolbar color="news">\n        <ion-buttons slot="start">\n            <ion-back-button></ion-back-button>\n            <img height="28" src="./assets/img/s.png"/>\n        </ion-buttons>\n        <ion-title horizontal="center">{{title | translate}}</ion-title>\n    </ion-toolbar>\n    <ion-segment (ionChange)="tabChanged($event)" [(ngModel)]="segment">\n        <ion-segment-button value="univ">\n            <ion-label>{{\'NEWS.UNIF\' | translate}}</ion-label>\n        </ion-segment-button>\n        <ion-segment-button value="fac">\n            <ion-label>{{\'NEWS.FAC\' | translate}}</ion-label>\n        </ion-segment-button>\n    </ion-segment>\n    <ion-segment (ionChange)="cachedOrNot()" *ngIf="segment===\'univ\'" [(ngModel)]="subsegment">\n        <ion-segment-button value="P1">\n            <ion-label>{{\'NEWS.STUDY\' | translate}}</ion-label>\n        </ion-segment-button>\n        <ion-segment-button value="P2">\n            <ion-label>{{\'NEWS.SEARCH\' | translate}}</ion-label>\n        </ion-segment-button>\n        <ion-segment-button value="P3">\n            <ion-label>{{\'NEWS.SERVICE\' | translate}}</ion-label>\n        </ion-segment-button>\n    </ion-segment>\n    <ion-segment *ngIf="segment===\'fac\'" [(ngModel)]="facsegment">\n        <ion-segment-button value="news">\n            <ion-label>{{\'HOME.NEWS\' |translate}} <strong *ngIf="userS.hasFac()">({{userS.fac}})</strong></ion-label>\n        </ion-segment-button>\n        <ion-segment-button value="valve">\n            <ion-label>{{\'NEWS.VALVE\' | translate}}</ion-label>\n        </ion-segment-button>\n    </ion-segment>\n    <ion-searchbar (ionChange)="filterUpdatedNews()" *ngIf="segment === \'univ\'" [(ngModel)]="searchTerm"\n                   [formControl]="searchControl"></ion-searchbar>\n</ion-header>\n\n\x3c!--BODY--\x3e\n<ion-content class="feed-list" #news>\n    <ion-refresher (ionRefresh)="doRefresh($event)" slot="fixed">\n        <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="Pull to refresh" refreshingSpinner="circles">\n        </ion-refresher-content>\n    </ion-refresher>\n\n\n    \x3c!------------------------------NEWS FACULTAIRES --------------------------------\x3e\n    \x3c!------------------------------CHOIX FAC --------------------------------\x3e\n    <ion-list *ngIf="segment === \'fac\' && !userS.hasFac() && facsegment === \'news\'">\n        <ion-item-group *ngFor="let sector of listFac">\n            <ion-item-divider>\n                <ion-label><strong>{{sector.name}}</strong></ion-label>\n            </ion-item-divider>\n            <ion-item *ngFor="let facs of sector.facs">\n                <ion-label>{{facs.acro}} : {{facs.name}}</ion-label>\n                <ion-radio (click)="updateFac(facs.acro)" slot="start"></ion-radio>\n            </ion-item>\n        </ion-item-group>\n    </ion-list>\n\n    \x3c!--------------------------------------- ACTUALITES VALVES ? ----------------------------------\x3e\n    <ion-grid *ngIf="segment === \'fac\' && facsegment===\'valve\'" id="valve">\n        <ion-row class="ion-align-items-center ion-justify-content-center">\n            <ion-button (click)="openURL(\'https://sites.uclouvain.be/sgsi-apps/shib-mesvalves/prod/\')" color="news"\n                        fill="solid"\n                        size="large">\n                <ion-icon name=\'share-alt\'></ion-icon>\n                <ion-label class="ion-text-center">{{\'NEWS.MESVALVES\' | translate}}</ion-label>\n            </ion-button>\n        </ion-row>\n    </ion-grid>\n    \x3c!--------------------------- ACTUALITES FAC -----------------------------------------\x3e\n\n    <ion-row *ngIf="segment === \'fac\' && userS.hasFac() && facsegment===\'news\'" class="ion-justify-content-center">\n        \x3c!----------------------------------------------------------------------\x3e\n        <ion-item>\n            <ion-label>\n                <h2><strong>Facult\xe9 : {{userS.fac}}</strong></h2>\n            </ion-label>\n        </ion-item>\n    </ion-row>\n    <ion-button (click)="openURL(site)" *ngIf="segment === \'fac\' && site.length > 0 && facsegment ===\'news\'" center\n                fill="clear" size="small"\n                slot="start">\n        <ion-icon name=\'share-alt\'></ion-icon>\n        {{\'NEWS.WEB\' | translate}}\n    </ion-button>\n    <p *ngIf="segment === \'fac\' && site.length == 0 && rss.length == 0 && shownNews == 0 && facsegment ===\'news\'"\n       class="ion-text-center">\n        <strong>Indisponible pour le moment</strong>\n    </p>\n\n    \x3c!------------------------------NEWS UNIVERSITAIRES & FACULTAIRES--------------------------------\x3e\n    <ng-container *ngIf="segment===\'univ\' || (segment === \'fac\' && facsegment === \'news\' && userS.hasFac())">\n        <ion-list #newsList [hidden]="shownNews === 0">\n            <ion-item (click)="goToNewsDetail(item)" *ngFor="let item of displayedNews" button>\n                <ion-label>\n                    <p><b>{{item.title}}</b></p>\n                    <p [innerHtml]="item.trimmedDescription"></p>\n                    <p>\n                        <ion-icon name="calendar" slot="start"></ion-icon>\n                        {{item.pubDate | date: \'dd/MM/yyyy\'}}\n                    </p>\n                </ion-label>\n            </ion-item>\n        </ion-list>\n        <ion-list-header *ngIf="nonews && !searching">\n            <ion-label>{{\'NEWS.NOTHING\' | translate}}</ion-label>\n        </ion-list-header>\n    </ng-container>\n\n</ion-content>\n\n\x3c!----------------- BUTTON TO CHANGE FAC -------------------------\x3e\n<ion-fab slot="fixed" vertical="bottom" horizontal="end"\n         *ngIf="segment===\'fac\' && facsegment === \'news\' && userS.hasFac()">\n    <ion-fab-button (click)="removeFac()">\n        <ion-icon name="swap"></ion-icon>\n    </ion-fab-button>\n</ion-fab>'},OtDQ:function(e,n){e.exports='@charset "UTF-8";\n/*\n    Copyright (c)  Universit\xe9 catholique Louvain.  All rights reserved\n    Authors : Benjamin Daubry & Bruno Marchesini and J\xe9r\xf4me Lemaire & Corentin Lamy\n    Date : 2018-2019\n    This file is part of Stud.UCLouvain\n    Licensed under the GPL 3.0 license. See LICENSE file in the project root for full license information.\n\n    Stud.UCLouvain is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    Stud.UCLouvain is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with Stud.UCLouvain.  If not, see <http://www.gnu.org/licenses/>.\n*/\n.spinner-container {\n  width: 100%;\n  text-align: center;\n  padding: 10px; }\n#valve {\n  height: 100% !important; }\n#valve ion-row {\n    height: 100% !important; }\n'},YXEz:function(e,n,t){"use strict";t.r(n);var i=t("mrSG"),s=t("Ip0R"),o=t("CcnG"),r=t("gIcY"),a=t("ZZ/e"),c=t("A7o+"),l=t("Gey8"),h=t("9B/o"),u=t("t/Na"),f=function(){return function(e,n,t,i,s,o,r,a){this.description=e,this.link=n,this.title=t,this.image=i,this.trimmedDescription=s,this.hidden=o,this.guid=r,this.pubDate=a}}(),d=t("dWyT"),p=function(){function e(e,n){this.http=e,this.rssService=n,this.url1="https://uclouvain.be/actualites/p1/rss",this.url2="https://uclouvain.be/actualites/p2/rss",this.url3="https://uclouvain.be/actualites/p3/rss",this.news=[],this.shownNews=0}return e.prototype.getNews=function(e,n){var t;switch(this.news=[],e){case"P2":t=this.url2;break;case"P3":t=this.url3;break;case"P1":t=this.url1;break;default:t=e}return this.rssService.loadItems(e,t,this.extractNews.bind(this),n)},e.prototype.extractNews=function(e){if(void 0===e.length){var n=e;(e=[]).push(n)}this.shownNews=0;return this.fillNews(e,20),{items:this.news,shownItems:this.shownNews}},e.prototype.fillNews=function(e,n){for(var t=0;t<e.length;t++){var i=e[t],s=this.getTrimmedDescription(i,n);this.shownNews++;var o=this.createDateForNews(i.pubDate),r=i.enclosure?this.getImg(i):"",a=new f(i.description||"No description...",i.link||"No link",i.title||"No title",r,s,!1,i.guid,o);this.news.push(a)}},e.prototype.getImg=function(e){var n="";return null!==e.enclosure&&(n=e.enclosure.$.url),n},e.prototype.getTrimmedDescription=function(e,n){var t="...";return void 0!==e.description&&(t=e.description.length>n?e.description.substring(0,80)+"...":e.description),t},e.prototype.createDateForNews=function(e){var n=e.split(" "),t=n[4].split(":"),i=parseInt(n[3],10),s=this.getMonthNumber(n[2]),o=parseInt(n[1],10),r=parseInt(t[0],10),a=parseInt(t[1],10);return new Date(i,s,o,r,a)},e.prototype.getMonthNumber=function(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(e)},e=i.c([Object(o.B)(),i.f("design:paramtypes",[u.a,d.a])],e)}(),g=t("sp4+"),m=t("67Y/"),b=function(){function e(e){this.http=e,this.facultes=[],this.url="assets/data/fac.json"}return e.prototype.loadResources=function(){var e=this;return 0===this.facultes.length?new Promise(function(n){e.http.get(e.url).pipe(Object(m.a)(function(e){return e})).subscribe(function(t){for(var i=0,s=t.secteurs;i<s.length;i++){var o=s[i];e.facultes.push(o)}n(e.facultes)})}):new Promise(function(n){n(e.facultes)})},e=i.c([Object(o.B)(),i.f("design:paramtypes",[u.a])],e)}(),w=t("XlaX"),v=t("oHzx"),N=t("sOJy"),S=function(){function e(e,n,t,i,s,o,a,c){var l=this;this.userS=e,this.newsService=n,this.connService=t,this.iab=i,this.facService=s,this.cache=o,this.loader=a,this.utilsServices=c,this.news=[],this.segment="univ",this.subsegment="P1",this.facsegment="news",this.shownNews=0,this.displayedNews=[],this.searching=!1,this.searchTerm="",this.title="Actualit\xe9s",this.nonews=!1,this.fac="",this.listFac=[],this.site="",this.rss="",this.searchControl=new r.a,this.facService.loadResources().then(function(e){l.listFac=e})}return e.prototype.ngOnInit=function(){this.cachedOrNot(),this.utilsServices.initSearchControl(this.searchControl,this.searching)},e.prototype.openURL=function(e){this.iab.create(e,"_system","location=yes")},e.prototype.updateFac=function(e){this.fac=e,this.userS.addFac(this.fac),this.findSite(),this.loadNews()},e.prototype.findSite=function(){for(var e=0,n=this.listFac;e<n.length;e++){var t=n[e];this.getAvailableSites(t)}},e.prototype.removeFac=function(){this.userS.removeFac()},e.prototype.doRefresh=function(e){var n="univ"===this.segment||"fac"===this.segment&&"news"===this.facsegment&&this.userS.hasFac();this.connService.isOnline()?this.handleOnlineRefresh(n,e):(this.connService.presentConnectionAlert(),e.target.complete())},e.prototype.tabChanged=function(e){void 0!==(e=e.detail.value)&&(this.segment=e,"univ"===e?this.cachedOrNot():"fac"===e&&this.manageMainTabFac())},e.prototype.manageMainTabFac=function(){this.fac=this.userS.fac,"news"===this.facsegment&&this.userS.hasFac()&&(this.findSite(),this.loadNews())},e.prototype.cachedOrNot=function(){var e=this;if("univ"===this.segment){var n=this.getKey();this.cache.getItem(n).then(function(n){return i.b(e,void 0,void 0,function(){return i.e(this,function(e){switch(e.label){case 0:return[4,this.loader.present("Please wait...")];case 1:return e.sent(),this.news=n.items,this.shownNews=n.showItems,this.searching=!1,this.updateDisplayed(),[2]}})})}).catch(function(){return i.b(e,void 0,void 0,function(){return i.e(this,function(e){switch(e.label){case 0:return[4,this.loadNews(n)];case 1:return e.sent(),[2]}})})})}else this.loadNews()},e.prototype.loadNews=function(e){return i.b(this,void 0,void 0,function(){var n,t=this;return i.e(this,function(i){return this.searching=!0,this.news=[],n=this.subsegment,"fac"===this.segment&&"news"===this.facsegment&&(n=this.rss),this.newsService.getNews(n,this.searching).then(function(n){t.news=n.items,e&&t.cache.saveItem(e,n),t.shownNews=n.showItems,t.nonews=0===t.news.length,t.updateDisplayed()}),[2]})})},e.prototype.updateDisplayed=function(){this.searching=!0,this.displayedNews=this.news,this.filterUpdatedNews(),this.shownNews=this.displayedNews.length,this.nonews=0===this.shownNews,this.searching=!1,this.loader.dismiss()},e.prototype.goToNewsDetail=function(e){this.utilsServices.goToDetail(e,"news/details")},e.prototype.getAvailableSites=function(e){for(var n=0,t=e.facs;n<t.length;n++){var i=t[n];i.acro===this.fac&&(this.site=i.site,this.rss=i.rss)}},e.prototype.handleOnlineRefresh=function(e,n){if(e)if("univ"===this.segment){var t=this.getKey();this.cache.removeItem(t),this.loadNews(t)}else this.loadNews();n.target.complete()},e.prototype.getKey=function(){var e=this.subsegment;return"P1"===e?"cache-P1":"P2"===e?"cache-P2":"cache-P3"},e.prototype.filterUpdatedNews=function(){var e=this;this.displayedNews=this.news.filter(function(n){return n.title.toLowerCase().indexOf(e.searchTerm.toLowerCase())>-1})},i.c([Object(o.lb)("newsList",{read:a.d}),i.f("design:type",a.d)],e.prototype,"newsList",void 0),i.c([Object(o.lb)("news"),i.f("design:type",a.c)],e.prototype,"content",void 0),e=i.c([Object(o.n)({selector:"page-news",template:t("NRyk"),styles:[t("OtDQ")]}),i.f("design:paramtypes",[v.a,p,g.a,h.a,b,l.b,w.a,N.b])],e)}(),y=t("ZYCi"),L=function(){function e(e,n){var t=this;this.route=e,this.router=n,this.route.queryParams.subscribe(function(){t.router.getCurrentNavigation().extras.state&&(t.news=t.router.getCurrentNavigation().extras.state.items)})}return e.prototype.openPage=function(e){window.open(e,"_blank")},e=i.c([Object(o.n)({selector:"page-news-details",template:t("dSeZ"),styles:[t("a3PK")]}),i.f("design:paramtypes",[y.a,y.f])],e)}(),I=[{path:"",component:S},{path:"details",component:L}],C=function(){function e(){}return e=i.c([Object(o.J)({imports:[y.h.forChild(I)],exports:[y.h]})],e)}();t.d(n,"NewsPageModule",function(){return A});var A=function(){function e(){}return e=i.c([Object(o.J)({declarations:[S,L],imports:[a.f,r.d,s.b,r.b,c.b.forChild(),C],providers:[p,g.a,b]})],e)}()},a3PK:function(e,n){e.exports='@charset "UTF-8";\n/*\n    Copyright (c)  Universit\xe9 catholique Louvain.  All rights reserved\n    Authors : Benjamin Daubry & Bruno Marchesini and J\xe9r\xf4me Lemaire & Corentin Lamy\n    Date : 2018-2019\n    This file is part of Stud.UCLouvain\n    Licensed under the GPL 3.0 license. See LICENSE file in the project root for full license information.\n\n    Stud.UCLouvain is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    Stud.UCLouvain is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with Stud.UCLouvain.  If not, see <http://www.gnu.org/licenses/>.\n*/\n.details {\n  background: #d1ffdc; }\n.details .details-content {\n    background: #ffffff; }\n'},dSeZ:function(e,n){e.exports='\x3c!--\n    Copyright (c)  Universit\xe9 catholique Louvain.  All rights reserved\n    Authors : Benjamin Daubry & Bruno Marchesini and J\xe9r\xf4me Lemaire & Corentin Lamy\n    Date : 2018-2019\n    This file is part of Stud.UCLouvain\n    Licensed under the GPL 3.0 license. See LICENSE file in the project root for full license information.\n\n    Stud.UCLouvain is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    Stud.UCLouvain is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with Stud.UCLouvain.  If not, see <http://www.gnu.org/licenses/>.\n--\x3e\n\x3c!--EN-TETE--\x3e\n<ion-header>\n    <ion-toolbar color="news">\n        <ion-buttons slot="start">\n            <ion-back-button></ion-back-button>\n        </ion-buttons>\n        <ion-row>\n            <ion-col>\n                <ion-title>{{news.title}}</ion-title>\n            </ion-col>\n        </ion-row>\n    </ion-toolbar>\n</ion-header>\n\n\x3c!--BODY--\x3e\n<ion-content>\n    <ion-card>\n\n        <img alt="News pictures" src="{{news.image}}" style="width:75%; margin:auto;"/>\n\n        <ion-card-content>\n            <ion-card-title>\n                {{news.title}}\n            </ion-card-title>\n            <br>\n            <p [innerHTML]="news.description"></p>\n        </ion-card-content>\n\n        <ion-row>\n            <ion-col class="ion-text-right">\n                <ion-button (click)="openPage(news.link)" fill="clear" size="small">\n                    <ion-icon name=\'share-alt\' slot="start"></ion-icon>\n                    {{\'NEWS.SITE\' | translate}}\n                </ion-button>\n            </ion-col>\n        </ion-row>\n\n    </ion-card>\n</ion-content>'}}]);